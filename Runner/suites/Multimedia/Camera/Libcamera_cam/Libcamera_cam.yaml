metadata:
  name: Libcamera_cam
  format: "Lava-Test Test Definition 1.0"
  description: "Run libcamera 'cam' capture with post-capture validation and DT checks (non-strict)."
  os:
    - linux
  scope:
    - functional

params:
  INDEX: "auto"
  COUNT: "10"
  OUT_DIR: "./cam_out"
  DUP_MAX_RATIO: "0.5"
  BIN_TOL_PCT: "5"
  ARGS: "" # optional; keep empty by default

run:
  steps:
    - REPO_PATH="$PWD"
    - cd Runner/suites/Multimedia/Camera/Libcamera_cam
    - ./run.sh --index "${INDEX}" --count "${COUNT}" --out "${OUT_DIR}" --dup-max-ratio "${DUP_MAX_RATIO}" --bin-tol-pct "${BIN_TOL_PCT}" --args "${ARGS}" --bin --no-strict || true
    - ${REPO_PATH}/Runner/utils/send-to-lava.sh Libcamera_cam.res
